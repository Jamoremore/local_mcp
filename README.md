# local_mcp
基于fastmcp实现本地MCP服务。调用Qwen3-32b模型并使用MCP工具调用心知天气API实现实时天气查询及多轮对话流式输出

# 文件介绍

`main.py`：主函数

`server.py`：记录get_weather函数。可以替换成其他mcp tool

# 使用方法

```bash
python server.py
python main.py
```

# 使用样例

```bash
请输入：>? 你好，我想咨询一下现在南京的天气情况
模型输出：
====================思考过程====================
好的，用户想查询南京的天气。我需要调用get_weather函数，参数是城市名南京。先确认函数是否存在，查看工具列表，确实有get_weather函数，参数是city，类型字符串，必填。所以应该构造一个JSON对象，name是get_weather，arguments里city设为“南京”。然后确保格式正确，用XML标签包裹工具调用部分。这样应该就能正确返回天气信息了。
====================回复内容====================
南京当前天气 小雨，气温 26 度
请输入：>? 我想再咨询一下北京现在的天气情况
模型输出：
====================思考过程====================
好的，用户之前询问了南京的天气，现在又想了解北京的天气。我需要调用get_weather函数来获取北京的实时天气情况。首先，确认用户的需求是查询北京当前的天气，参数是城市名“北京”。然后，检查工具中的函数是否适用，这里get_weather函数正好需要城市名作为参数。接下来，构造正确的tool_call，确保参数正确无误。最后，返回函数调用结果，等待进一步的信息来回复用户。注意保持响应的及时性和准确性
====================回复内容====================
北京当前天气 中雨，气温 19 度
请输入：>? 介绍一下你自己，你都有哪些功能？
模型输出：
====================思考过程====================
好的，用户现在让我介绍一下自己和我的功能。首先，我需要确定用户之前对话的上下文。之前的对话中，用户询问了南京和北京的天气，我提供了天气信息。现在用户可能想了解更多关于我的功能，或者确认我能处理哪些类型的请求。
用户的问题比较直接，但可能需要我简明扼要地介绍自己。我需要确保回答覆盖主要功能，同时保持友好和帮助的态度。考虑到用户之前使用过天气查询，我应该突出这个功能，但也要提到其他可能的功能，如果有的话。
不过根据提供的工具，目前我只能调用get_weather这个函数。所以我的功能主要集中在天气查询上。需要明确说明我可以查询任何城市的实时天气，包括温度、降水情况等。同时，要邀请用户提出其他问题或需求，以确认是否还有其他隐藏的需求。
另外，用户可能想知道我的其他能力，比如是否支持多语言、是否能提供其他天气相关的信息（如湿度、风速等），但根据现有的工具描述，这些信息可能不可用。因此，我需要根据提供的工具信息来准确回答，避免夸大功能。
总结回答结构：先问候，然后说明主要功能是天气查询，举例说明可以查询的信息类型，最后邀请用户提出具体需求。确保回答自然，不使用技术术语，保持口语化。
====================回复内容====================
您好！我是一个天气查询助手，主要功能是帮您获取各地的实时天气信息。比如可以查询某个城市的当前天气状况（如晴/雨/雪）、气温（摄氏度或华氏度）等信息。您只需告诉我您想查询的城市名称，我就会为您返回最新的天气数据。除了天气查询，我暂时没有其他功能哦~ 如果有其他问题，欢迎您随时告诉我！
请输入：
```
